/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 14-sept.-2019 9:42:21 p. m. 				*/
/*  DBMS       : Oracle 						*/
/* ---------------------------------------------------- */

/* Drop Tables

begin
	EXECUTE IMMEDIATE DROP TABLE   Categoria CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Cliente CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Cliente_Pedido CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Grado CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Impuesto CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   ModoDePago CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Pais CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Pedido CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Producto CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Producto_pedido CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Producto_Region CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Producto_Subcategoria CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Region CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   RepresentanteVentas CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   RepresentanteVentas_Cliente CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

begin
	EXECUTE IMMEDIATE DROP TABLE   Subcategoria CASCADE CONSTRAINTS;
	EXCEPTION WHEN OTHERS THEN NULL;
end;
/

*/

/* Create Tables */

CREATE TABLE  Categoria
(
	PK_N_IDCATEGORIA NUMBER(8) NOT NULL,
	V_NOMBRECATEGORIA VARCHAR2(50) NOT NULL,
	N_IVA NUMBER(2,2) NOT NULL
)
;

CREATE TABLE  Cliente
(
	PK_N_CEDULA NUMBER(8) NOT NULL,
	V_NOMBRECLIENTE VARCHAR2(50) NOT NULL,
	V_APELLIDOCLIENTE VARCHAR2(50) NOT NULL,
	V_TELEFONO VARCHAR2(50) NOT NULL,
	V_DIRECCION VARCHAR2(50) NOT NULL,
	V_CIUDAD VARCHAR2(50) NOT NULL,
	V_CORREOELECTRONICO VARCHAR2(50) NULL
)
;

CREATE TABLE  Cliente_Pedido
(
	D_FECHAPEDIDO DATE NOT NULL,
	PK_N_ID NUMBER(8) NOT NULL,
	FK_N_IDPEDIDO NUMBER(8) NOT NULL,
	FK_N_CEDULA NUMBER(8) NOT NULL
)
;

CREATE TABLE  Grado
(
	PK_N_IDGRADO NUMBER(8,2) NOT NULL,
	V_NOMBREGRADO VARCHAR2(20) NOT NULL,
	V_DESCRIPCIONGRADO VARCHAR2(50) NULL
)
;

CREATE TABLE  ModoDePago
(
	PK_N_IDMODODEPAGO NUMBER(8) NOT NULL,
	V_NOMBREMODODEPAGO VARCHAR2(20) NOT NULL
)
;

CREATE TABLE  Pais
(
	PK_N_IDPAIS NUMBER(8) NOT NULL,
	V_NOMBREPAIS VARCHAR2(50) NOT NULL
)
;

CREATE TABLE  Pedido
(
	PK_N_IDPEDIDO NUMBER(8) NOT NULL,
	V_ESTADOPEDIDO VARCHAR2(10) NOT NULL,
	V_CALIFICACION VARCHAR2(50) NULL,
	FK_N_IDMODODEPAGO NUMBER(8) NOT NULL
)
;

CREATE TABLE  Producto
(
	PK_N_IDPRODUCTO NUMBER(8) NOT NULL,
	V_NOMBREPRODUCTO VARCHAR2(50) NOT NULL
)
;

CREATE TABLE  Producto_pedido
(
	PK_N_IDDETALLE NUMBER(8) NOT NULL,
	N_CANTIDAD NUMBER(8) NOT NULL,
	FK_N_IDPEDIDO NUMBER(8) NOT NULL,
	FK_N_IDPRODUCTO NUMBER(8) NOT NULL
)
;

CREATE TABLE  Producto_Region
(
	PK_N_IDPRODUCTOREGION NUMBER(8) NOT NULL,
	N_PRECIO NUMBER(8,2) NOT NULL,
	FK_N_IDREGION NUMBER(8) NOT NULL,
	FK_N_IDPRODUCTO NUMBER(8) NOT NULL
)
;

CREATE TABLE  Producto_Subcategoria
(
	PK_N_ID NUMBER(8) NOT NULL,
	D_FECHACLASIFICACION VARCHAR2(50) NULL,
	FK_N_IDPRODUCTO NUMBER(8) NOT NULL,
	FK_N_IDSUBCATEGORIA NUMBER(8) NOT NULL
)
;

CREATE TABLE  Region
(
	PK_N_IDREGION NUMBER(8) NOT NULL,
	V_NOMBREREGION VARCHAR2(50) NOT NULL,
	FK_N_IDPAIS NUMBER(8) NULL
)
;

CREATE TABLE  RepresentanteVentas
(
	PK_N_IDENTIFICACION NUMBER(8) NOT NULL,
	V_NOMBRE VARCHAR2(50) NOT NULL,
	V_CORREOELECTRONICO VARCHAR2(50) NULL,
	V_GENERO VARCHAR2(1) NOT NULL,
	D_FECHANACIMIENTO DATE NOT NULL,
	D_FECHACONTRATO DATE NOT NULL,
	V_TELEFONOCONTACTO VARCHAR2(12) NOT NULL,
	V_DIRECCION VARCHAR2(30) NOT NULL,
	V_ESDIRECTOR VARCHAR2(1) NOT NULL,
	FK_N_IDGRADO NUMBER(8,2) NOT NULL,
	FK_N_IDREGION NUMBER(8) NOT NULL
)
;

CREATE TABLE  RepresentanteVentas_Cliente
(
	D_FECHAINICIO DATE NOT NULL,
	D_FECHAFIN DATE NULL,
	PK_N_ID NUMBER(10) NOT NULL,
	FK_N_CEDULA NUMBER(8) NULL,
	FK_N_IDENTIFICACION NUMBER(8) NULL
)
;

CREATE TABLE  Subcategoria
(
	PK_N_IDSUBCATEGORIA NUMBER(8) NOT NULL,
	V_NOMBRESUBCATEGORIA VARCHAR2(50) NOT NULL,
	V_DESCRIPCIONSUBCATEGORIA VARCHAR2(50) NULL,
	FK_N_IDCATEGORIA NUMBER(8) NULL
)
;

/* Create Primary Keys, Indexes, Uniques, Checks, Triggers */

ALTER TABLE  Categoria
 ADD CONSTRAINT PK_CATEOGORIA
	PRIMARY KEY (PK_N_IDCATEGORIA)
 USING INDEX
;

ALTER TABLE  Cliente
 ADD CONSTRAINT PK_CLIENTE
	PRIMARY KEY (PK_N_CEDULA)
 USING INDEX
;

ALTER TABLE  Cliente_Pedido
 ADD CONSTRAINT PK_Cliente_Pedi_01
	PRIMARY KEY (PK_N_ID)
 USING INDEX
;

ALTER TABLE  Grado
 ADD CONSTRAINT PK_GRADO
	PRIMARY KEY (PK_N_IDGRADO)
 USING INDEX
;

ALTER TABLE  ModoDePago
 ADD CONSTRAINT PK_ModoDePago
	PRIMARY KEY (PK_N_IDMODODEPAGO)
 USING INDEX
;

ALTER TABLE  Pais
 ADD CONSTRAINT PK_ID
	PRIMARY KEY (PK_N_IDPAIS)
 USING INDEX
;

ALTER TABLE  Pedido
 ADD CONSTRAINT PK_PEDIDO
	PRIMARY KEY (PK_N_IDPEDIDO)
 USING INDEX
;

ALTER TABLE  Producto
 ADD CONSTRAINT PK_PRODUCTO
	PRIMARY KEY (PK_N_IDPRODUCTO)
 USING INDEX
;

ALTER TABLE  Producto_pedido
 ADD CONSTRAINT PK_Producto_pedido
	PRIMARY KEY (PK_N_IDDETALLE)
 USING INDEX
;

ALTER TABLE  Producto_Region
 ADD CONSTRAINT PK_PRODUCTO_REGION
	PRIMARY KEY (PK_N_IDPRODUCTOREGION)
 USING INDEX
;

ALTER TABLE  Producto_Subcategoria
 ADD CONSTRAINT PK_Producto_Subcategoria
	PRIMARY KEY (PK_N_ID)
 USING INDEX
;

ALTER TABLE  Region
 ADD CONSTRAINT PK_REGION
	PRIMARY KEY (PK_N_IDREGION)
 USING INDEX
;

ALTER TABLE  RepresentanteVentas
 ADD CONSTRAINT PK_IDENTIFICACION
	PRIMARY KEY (PK_N_IDENTIFICACION)
 USING INDEX
;

ALTER TABLE  RepresentanteVentas_Cliente
 ADD CONSTRAINT PK_REPRESENTANTEVENTAS_CLIENTE
	PRIMARY KEY (PK_N_ID)
 USING INDEX
;

ALTER TABLE  Subcategoria
 ADD CONSTRAINT PK_SUBCATEGORIA
	PRIMARY KEY (PK_N_IDSUBCATEGORIA)
 USING INDEX
;

/* Create Foreign Key Constraints */

ALTER TABLE  Cliente_Pedido
 ADD CONSTRAINT FK_Cliente_Pedido_Pedido
	FOREIGN KEY (FK_N_IDPEDIDO) REFERENCES  Pedido (PK_N_IDPEDIDO)
;

ALTER TABLE  Cliente_Pedido
 ADD CONSTRAINT FK_Cliente_Pedido_Cliente
	FOREIGN KEY (FK_N_CEDULA) REFERENCES  Cliente (PK_N_CEDULA)
;

ALTER TABLE Region
 ADD CONSTRAINT FK_Region_Pais
	FOREIGN KEY (FK_N_IDPAIS) REFERENCES Pais (PK_N_IDPAIS)
;

ALTER TABLE  Pedido
 ADD CONSTRAINT FK_Pedido_ModoDePago
	FOREIGN KEY (FK_N_IDMODODEPAGO) REFERENCES  ModoDePago (PK_N_IDMODODEPAGO)
;

ALTER TABLE  Producto_pedido
 ADD CONSTRAINT FK_Producto_pedido_Pedido
	FOREIGN KEY (FK_N_IDPEDIDO) REFERENCES  Pedido (PK_N_IDPEDIDO)
;

ALTER TABLE Subcategoria
	ADD CONSTRAINT FK_Subcategoria_Categoria
		FOREIGN KEY (FK_N_IDCATEGORIA) REFERENCES Categoria (PK_N_IDCATEGORIA)
;

ALTER TABLE  Producto_pedido
 ADD CONSTRAINT FK_Producto_pedido_Producto
	FOREIGN KEY (FK_N_IDPRODUCTO) REFERENCES  Producto (PK_N_IDPRODUCTO)
;

ALTER TABLE  Producto_Region
 ADD CONSTRAINT FK_Producto_Region_Region
	FOREIGN KEY (FK_N_IDREGION) REFERENCES  Region (PK_N_IDREGION)
;

ALTER TABLE  Producto_Region
 ADD CONSTRAINT FK_Producto_Region_Producto
	FOREIGN KEY (FK_N_IDPRODUCTO) REFERENCES  Producto (PK_N_IDPRODUCTO)
;

ALTER TABLE  Producto_Subcategoria
 ADD CONSTRAINT FK_Producto_Sub_Subcategori_01
	FOREIGN KEY (FK_N_IDSUBCATEGORIA) REFERENCES  Subcategoria (PK_N_IDSUBCATEGORIA)
;

ALTER TABLE  Producto_Subcategoria
 ADD CONSTRAINT FK_Producto_Subcat_Producto_01
	FOREIGN KEY (FK_N_IDPRODUCTO) REFERENCES  Producto (PK_N_IDPRODUCTO)
;

ALTER TABLE  RepresentanteVentas
 ADD CONSTRAINT FK_RepresentanteVen_Region
	FOREIGN KEY (FK_N_IDREGION) REFERENCES  Region (PK_N_IDREGION)
;

ALTER TABLE  RepresentanteVentas
 ADD CONSTRAINT FK_RepresentanteVen_Grado
	FOREIGN KEY (FK_N_IDGRADO) REFERENCES  Grado (PK_N_IDGRADO)
;

ALTER TABLE  RepresentanteVentas_Cliente
 ADD CONSTRAINT FK_Representant_Representan_01
	FOREIGN KEY (FK_N_IDENTIFICACION) REFERENCES  RepresentanteVentas (PK_N_IDENTIFICACION)
;

ALTER TABLE  RepresentanteVentas_Cliente
 ADD CONSTRAINT FK_RepresentanteVen_Cliente_01
	FOREIGN KEY (FK_N_CEDULA) REFERENCES  Cliente (PK_N_CEDULA)
;
